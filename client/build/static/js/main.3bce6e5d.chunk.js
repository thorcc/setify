(this["webpackJsonpsetify-netlify"]=this["webpackJsonpsetify-netlify"]||[]).push([[0],{11:function(e,t,n){e.exports={Home:"Home_Home__Hrybx",Login:"Home_Login__9adTl"}},22:function(e,t,n){e.exports={SearchField:"SearchField_SearchField__3GL-5"}},24:function(e,t,n){e.exports={Search:"Search_Search__2SQmI"}},25:function(e,t,n){e.exports={Songs:"Songs_Songs__1uQkd"}},26:function(e,t,n){e.exports={Spotify:"SpotifyLogin_Spotify__Hu5Hj"}},27:function(e,t,n){},28:function(e,t,n){e.exports={Error:"Error_Error__3f4kP"}},29:function(e,t,n){e.exports=n(54)},34:function(e,t,n){},4:function(e,t,n){e.exports={Concert:"Concert_Concert__3S2fQ",Date:"Concert_Date__JOjI_",Icons:"Concert_Icons__2IbeB",Toggle:"Concert_Toggle__31rg6",Spotify:"Concert_Spotify__33uqb",NoSongs:"Concert_NoSongs__-IqGe"}},53:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(21),o=n.n(c),l=(n(34),n(5)),s=n.n(l),i=n(8),u=n(2),f=n(7),m=n.n(f),p=(n(53),n(22)),h=n.n(p),d=function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("input",{className:h.a.SearchField,type:"text",name:"artist",placeholder:"artist search",value:e.chosenArtist,onChange:e.handleSearchInput}))},g=n(9),E=n.n(g),S=n(23),b=n.n(S),y=function(e){var t=e.info.country?r.a.createElement(b.a,{className:E.a.Flag,code:e.info.country,height:"16"}):null;return r.a.createElement("div",{onClick:function(){return e.handleClick(e.info.name,e.info.id)},className:E.a.Result},t,r.a.createElement("p",null,e.info.name))},_=function(e){return r.a.createElement("div",null,e.searchResult.map((function(t){return r.a.createElement(y,{handleClick:e.handleClick,choose:e.choose,key:t.id,info:t})})))},v=n(24),O=n.n(v),j=function(e){var t=e.showSearchResults?r.a.createElement(_,{choose:e.choose,handleClick:e.handleClick,searchResult:e.searchResult}):null;return r.a.createElement("div",{className:O.a.Search},r.a.createElement(d,{handleSubmit:e.handleSubmit,handleSearchInput:e.handleSearchInput,chosenArtist:e.artistSearch}),t)},k=function(e){return r.a.createElement("li",null,e.name)},C=n(25),w=n.n(C),N=function(e){return r.a.createElement("ol",{className:w.a.Songs},e.songs.map((function(e){return r.a.createElement(k,{key:e,name:e})})))},x=n(4),I=n.n(x),R=n(10),H=n(6),F=n(26),L=n.n(F),T="https://accounts.spotify.com/authorize?client_id=".concat("c241b1237423480285702256ed781af7","&redirect_uri=").concat("https://setify.app","&response_type=token&scope=").concat("playlist-modify-public"),P=function(e){return r.a.createElement("a",{href:T,className:L.a.Spotify},r.a.createElement("p",null,e.text),r.a.createElement(H.a,null))},A=function(e){var t=Object(a.useState)(!1),n=Object(u.a)(t,2),c=n[0],o=n[1],l=function(){return o(!c)},s=c?r.a.createElement(R.b,{size:"3em",onClick:l,className:I.a.Toggle}):r.a.createElement(R.a,{size:"3em",onClick:l,className:I.a.Toggle}),i=[I.a.Concert],f=null;return 0===e.info.songs.length?i.push(I.a.NoSongs):f=r.a.createElement("div",{className:I.a.Icons},e.loggedIn?r.a.createElement("div",{onClick:function(){return e.createPlaylist(e.info.songs,e.info.venue,e.info.date+"-"+e.info.year)},className:I.a.Spotify},r.a.createElement("p",null,"Create playlist"),r.a.createElement(H.a,null)):r.a.createElement(P,{className:I.a.Spotify,text:"Log in to create list"}),s),r.a.createElement("div",{className:i.join(" ")},r.a.createElement("div",{className:I.a.Date},r.a.createElement("p",null,e.info.date),r.a.createElement("p",null,e.info.year)),r.a.createElement("div",null,r.a.createElement("p",null,e.info.venue),r.a.createElement("p",null,e.info.city)),f,c?r.a.createElement(N,{songs:e.info.songs}):null)},z=n(27),B=n.n(z),D=function(e){return r.a.createElement("div",{className:B.a.Concert},e.artistConcerts.map((function(t){return r.a.createElement(A,{key:t.id,loggedIn:e.loggedIn,createPlaylist:e.createPlaylist,info:t})})))},J=n(11),K=n.n(J),Q=function(e){return r.a.createElement("div",{className:K.a.Home},r.a.createElement("h1",null,"setify"),r.a.createElement("p",null,"Setify lets you create Spotify playlists from concert setlists."),r.a.createElement("div",{className:K.a.Login},e.loggedIn?r.a.createElement("div",null,r.a.createElement("p",null,"You are logged in, search for an artist to create a playlist.")):r.a.createElement("div",null,r.a.createElement("p",null,"You have to log in to your spotify account to create playlists."),r.a.createElement(P,{text:"Spotify Login"}))))},Y=n(28),q=n.n(Y),G=function(e){var t="";switch(e.errType){case"login":t="Error: Could not create playlist. You have to be logged in.";break;case"getSetlist":t="Error: Could not fetch setlists.";break;case"getArtist":t="Error: Could not fetch artists.";break;default:t="Something went wrong."}return r.a.createElement("div",{className:q.a.Error},r.a.createElement("p",null,t),r.a.createElement("button",{onClick:e.handleErrorOK},"OK"))};var W=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(""),l=Object(u.a)(o,2),f=l[0],p=l[1],h=Object(a.useState)(""),d=Object(u.a)(h,2),g=d[0],E=d[1],S=Object(a.useState)(""),b=Object(u.a)(S,2),y=b[0],_=b[1],v=Object(a.useState)(!1),O=Object(u.a)(v,2),k=O[0],C=O[1],w=Object(a.useState)(!1),N=Object(u.a)(w,2),x=N[0],I=N[1],R=Object(a.useState)([]),H=Object(u.a)(R,2),F=H[0],L=H[1],T=Object(a.useState)(!0),P=Object(u.a)(T,2),A=P[0],z=P[1],B=Object(a.useState)(!1),J=Object(u.a)(B,2),K=J[0],Y=J[1],q=Object(a.useState)(""),W=Object(u.a)(q,2),U=W[0],$=W[1],M=Object(a.useState)({}),V=Object(u.a)(M,2),X=V[0],Z=V[1],ee=Object(a.useState)(!1),te=Object(u.a)(ee,2),ne=te[0],ae=te[1];Object(a.useEffect)((function(){(function(){var e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("/.netlify/functions/server/api/brainz/"+f);case 3:t=e.sent,c(t.data),C(!0),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),$("getArtist"),Y(!0);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[f]),Object(a.useEffect)((function(){(function(){var e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("/.netlify/functions/server/api/setlists/"+y);case 3:t=e.sent,L(t.data),I(!0),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),$("getSetlist"),Y(!0);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[y]),Object(a.useEffect)((function(){var e=window.location.hash.substring(1).split("&").reduce((function(e,t){if(t){var n=t.split("=");e[n[0]]=decodeURIComponent(n[1])}return e}),{});window.location.hash="",Z(e)}),[]),Object(a.useEffect)((function(){return X.access_token?ae(!0):ae(!1)}),[X]);var re=K?r.a.createElement(G,{handleErrorOK:function(){return Y(!1)},errType:U}):null,ce=x?r.a.createElement(D,{loggedIn:ne,createPlaylist:function(e,t,n){console.log(e),m.a.post("/.netlify/functions/server/api/create-playlist/",{artist:f,tracks:e,token:X.access_token,name:f+" - "+t+": "+n}).then((function(e){console.log(e),alert("Playlist created!")})).catch((function(e){console.log(e),alert("Something went wrong.")}))},artistConcerts:F}):null,oe=A?r.a.createElement(Q,{loggedIn:ne}):null;return r.a.createElement("div",{className:"App"},r.a.createElement("header",null,r.a.createElement(j,{showSearchResults:k,handleSearchInput:function(e){E(e.target.value)},handleSubmit:function(e){e.preventDefault(),p(g),z(!1),I(!1)},handleClick:function(e,t){C(!1),I(!0),E(e),_(t)},artistSearch:g,searchResult:n})),oe,ce,re)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},9:function(e,t,n){e.exports={Result:"Result_Result__7to00",Flag:"Result_Flag__7kg2B"}}},[[29,1,2]]]);
//# sourceMappingURL=main.3bce6e5d.chunk.js.map